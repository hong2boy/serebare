(function($) {
  $(document).ready(function() {

    $("#contents").addClass('prdContents');
    pd_Default_info();
    pd_Default_Contents();
    var appendMask = '<div id="popUpMask">' + '</div>';
    $("body").append(appendMask);

    function throttle(callback, limit) {
      var wait = false;
      return function() {
        if (!wait) {
          callback.apply(null, arguments);
          wait = true;
          setTimeout(function() {
            wait = false
          }, limit)
        }
      }
    }

    function pd_Default_info() {
      if (pd_Share == "off") {
        $('.share-wrap').addClass('offDisplay')
      } else {
        $('.share-wrap').removeClass('offDisplay on_off_select')
      }
      if (pd_PlusDiscount == "off") {
        $(".benefit-slide").addClass('offHeight')
      } else {
        $(".benefit-slide").removeClass('offHeight on_off_select')
      }
      if (pd_Card_FreeInstallment == "off") {
        $('.card-benefit').addClass('offDisplay')
      } else {
        $('.card-benefit').removeClass('offDisplay on_off_select')
      }
    }

    function pd_Default_Contents() {
      if (pd_MemberShip == "off") {
        $('.member-benefit').addClass('offDisplay')
      }
      if (pd_Review_Banner == "off") {
        $('#prdReview').find('.detail-banner img').addClass('offDisplay')
      }
    }
    var prdScope = $(".xans-product-detaildesign").find('th[scope="row"]');
    prdScope.each(function() {
      var prdScopeText = $(this).find('span').html();
      if (prdScopeText == "비디오"||prdScopeText == "상품간략설명") {
        $(this).parent("tr").hide()
      }
    });
    $("#tabProduct li").click(function(e) {
      var menuClickIndex = $(this).index();
      e.preventDefault();
      $('html, body').animate({
        scrollTop: $('.prdContentsIndex').eq(menuClickIndex).offset().top - 120
      }, 500);
      $("#tabProduct li").removeClass("selected");
      $(this).addClass('selected')
    });
    $(".card-btn").click(function(event) {
      $("#popUpMask").fadeIn("500");
      $(".card-benefit-box").fadeIn('400', function() {
        $("body").css('overflow', 'hidden');
        var popupShip = true;
        $('body').click(function(e) {
          if ($(e.target).closest('.card-benefit-box').length == 0 && popupShip == true || $(e.target).is('.ti-close')) {
            $("#popUpMask").fadeOut("400");
            $(".card-benefit-box").fadeOut('400', function() {
              popupShip = false;
              $("body").css('overflow', 'scroll')
            })
          }
        })
      })
    });
    $(".share-btn").click(function(event) {
      $("#popUpMask").fadeIn("500");
      $(".share-pop").fadeIn('400', function() {
        $("body").css('overflow', 'hidden');
        var thisUrl = location.href;
        var getText = $(".share-pop").find('input');
        getText.attr('value', thisUrl);
        $(".text-form button").click(function(event) {
          getText.select();
          document.execCommand("copy")
        });
        var popupShip = true;
        $('body').click(function(e) {
          if ($(e.target).closest('.share-pop').length == 0 && popupShip == true || $(e.target).is('.ti-close')) {
            $("#popUpMask").fadeOut("400");
            $(".share-pop").fadeOut('400', function() {
              popupShip = false;
              $("body").css('overflow', 'scroll')
            })
          }
        })
      })
    });



  })
})(jQuery);
